import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go


@st.cache_data
def open_data(path="data/clients.csv"):
    df = pd.read_csv(path)
    df = df.drop(columns=['Unnamed: 0', 'ID_CLIENT'])
    return df


def perc_of_target(df, param_group: str, counted: str):
    value_counts = df[param_group].value_counts().reset_index()
    value_counts.columns = [param_group, 'count']

    sorted_value_counts = value_counts.sort_values(by='count', ascending=True)

    grouped = df.groupby([param_group, 'CNT_TARGET']).count()[[counted]].reset_index()
    grouped = grouped.merge(df.groupby([param_group]).count()[[counted]].reset_index(), on=param_group)

    grouped = grouped.sort_values(by=f'{counted}_y', ascending=True)

    grouped['TARGET_SHARE'] = (grouped[f'{counted}_x'] / grouped[f'{counted}_y']).round(2)
    grouped['TARGET_SHARE'] = grouped['TARGET_SHARE'].apply(lambda x: f'{x:0.0%}')
    grouped = grouped[grouped.CNT_TARGET == 1]
    return grouped, sorted_value_counts


def client_info(df):
    st.write('## –£–∑–Ω–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Ç–∏–ø–∏—á–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –±–∞–Ω–∫–∞')

    st.dataframe(df.describe(), use_container_width=True)

    '–°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞ –≤–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è –æ—Ç 2–∫ –¥–æ 120–∫ —Ä—É–±–ª–µ–π, —Å—Ä–æ–∫ –æ—Ç 3 –º–µ—Å—è—Ü–µ–≤ –¥–æ 3 –ª–µ—Ç - –∑–Ω–∞—á–∏—Ç –∫–ª–∏–µ–Ω—Ç—ã –±–∞–Ω–∫–∞ –±–µ—Ä—É—Ç —Ç–æ–ª—å–∫–æ *–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫—Ä–µ–¥–∏—Ç—ã*'

    st.dataframe(df.describe(include='object'), use_container_width=True)

    st.write('### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤')
    col1, col2 = st.columns(2)

    with col1:
        st.write('#### –ü–æ –ø–æ–ª—É')
        fig = px.histogram(df, x='GENDER', color='MARITAL_STATUS')
        st.plotly_chart(fig, use_container_width=True)

    with col2:
        st.write('#### –ü–æ –≤–æ–∑—Ä–∞—Å—Ç—É')
        fig = go.Figure()
        fig.add_trace(go.Box(y=df[df.CNT_TARGET == 0]['AGE'], name='–†–µ–∞–∫—Ü–∏–∏ –Ω–µ—Ç',
                             ))
        fig.add_trace(go.Box(y=df[df.CNT_TARGET == 1]['AGE'], name='–†–µ–∞–∫—Ü–∏—è –µ—Å—Ç—å',
                             ))
        fig.add_trace(go.Box(y=df['AGE'], name='–í—Å–µ–≥–æ',
                             ))
        fig.update_layout(xaxis_title="–†–µ–∞–∫—Ü–∏—è –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É",
                          yaxis_title="AGE", )
        st.plotly_chart(fig, use_container_width=True)
    '''
        –ú—É–∂—á–∏–Ω –ø–æ—á—Ç–∏ –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –∂–µ–Ω—â–∏–Ω, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ–Ω–∏ —Å–æ—Å—Ç–æ—è—Ç –≤ –±—Ä–∞–∫–µ (–∫–∞–∫ –∏ –∂–µ–Ω—â–∏–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞–º—É–∂–µ–º)
        
        –í–æ–∑—Ä–∞—Å—Ç –≤–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è –æ—Ç 21 –¥–æ 67 –ª–µ—Ç, –º–µ–¥–∏–∞–Ω–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –∫–ª–∏–µ–Ω—Ç–∞ –±–∞–Ω–∫–∞ - 39 –ª–µ—Ç 
        
        –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Ö, –∫—Ç–æ –æ—Ç–∫–ª–∏–∫–Ω—É–ª—Å—è –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ–±—â–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –∞–Ω–æ–º–∞–ª–∏–π –Ω–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ *–ª—é–¥–∏, –æ—Ç–∫–ª–∏–∫–Ω—É–≤—à–∏–µ—Å—è –Ω–∞ –∫–∞–º–ø–∞–Ω–∏—é, –º–æ–ª–æ–∂–µ*
        
    '''

    '> –î–∞–ª–µ–µ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∏ –≤—ã–≤–µ–¥—É –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–∏–∫–Ω—É–≤—à–∏—Ö—Å—è –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Å—Ä–µ–∑–∞–º: CNT_TARGET = 1 - –±—ã–ª –æ—Ç–∫–ª–∏–∫, CNT_TARGET = 0 - –Ω–µ –±—ã–ª–æ –æ—Ç–∫–ª–∏–∫–∞'

    '#### –ü–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é'
    fig = px.histogram(df, x='EDUCATION', color='CNT_TARGET', category_orders={
        'EDUCATION': ['–ù–µ–ø–æ–ª–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ', '–°—Ä–µ–¥–Ω–µ–µ', '–°—Ä–µ–¥–Ω–µ–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ',
                      '–ù–µ–æ–∫–æ–Ω—á–µ–Ω–Ω–æ–µ –≤—ã—Å—à–µ–µ', '–í—ã—Å—à–µ–µ', '–î–≤–∞ –∏ –±–æ–ª–µ–µ –≤—ã—Å—à–∏—Ö –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è',
                      '–£—á–µ–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å']})

    grouped, sorted_value_counts = perc_of_target(df, 'EDUCATION', 'GEN_INDUSTRY')
    dict_edu = {'–ù–µ–ø–æ–ª–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ': 0, '–°—Ä–µ–¥–Ω–µ–µ': 1, '–°—Ä–µ–¥–Ω–µ–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ': 2,
                '–ù–µ–æ–∫–æ–Ω—á–µ–Ω–Ω–æ–µ –≤—ã—Å—à–µ–µ': 3, '–í—ã—Å—à–µ–µ': 4, '–î–≤–∞ –∏ –±–æ–ª–µ–µ –≤—ã—Å—à–∏—Ö –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è': 5,
                '–£—á–µ–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å': 6}
    grouped['sort'] = grouped['EDUCATION'].map(dict_edu)
    grouped = grouped.sort_values(by='sort', ascending=True)

    fig.data[1].text = grouped['TARGET_SHARE']
    fig.update_traces(textposition='outside', textfont_size=14)

    st.plotly_chart(fig, use_container_width=True)

    '–ß–∞—â–µ –∫—Ä–µ–¥–∏—Ç—ã –±–µ—Ä—É—Ç –ª—é–¥–∏ –±–µ–∑ –≤—ã—Å—à–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è'

    '### –í –∫–∞–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–ª–∏–µ–Ω—Ç—ã –±–∞–Ω–∫–∞'

    grouped, sorted_value_counts = perc_of_target(df, 'GEN_INDUSTRY', 'EDUCATION')
    grouped = grouped.sort_values(by='EDUCATION_y', ascending=False)

    # Create a histogram using Plotly Express
    fig = px.histogram(df, y='GEN_INDUSTRY', color='CNT_TARGET',
                       category_orders={'GEN_INDUSTRY': sorted_value_counts['GEN_INDUSTRY'].tolist()})
    fig.data[1].text = grouped['TARGET_SHARE']
    fig.update_traces(textposition='outside', textfont_size=14)
    st.plotly_chart(fig, use_container_width=True)

    '–ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ª—é–¥–µ–π, –±–µ—Ä—É—â–∏—Ö –∫—Ä–µ–¥–∏—Ç, —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ'
    '–≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∏–Ω—Å–∞–π—Ç, —Ç–∞–∫ –∫–∞–∫ –≤–æ–∑–º–æ–∂–Ω–æ –æ–Ω–∏ –±–µ—Ä—É—Ç –≤ –∫—Ä–µ–¥–∏—Ç —Ç–µ —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ –ø–æ—Ç–æ–º —Ç–æ—Ä–≥—É—é—Ç'
    '–¢–∞–∫–∂–µ –º–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≥–æ—Å.—Å–ª—É–∂–±–µ –∏–ª–∏ –≤ –º–µ–¥. —É—á—Ä–µ–∂–¥–µ–Ω–∏—è—Ö, —á—Ç–æ –º–æ–∂–µ—Ç —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ–≤–∞—Ç—å –æ —Ç–æ–º, —á—Ç–æ –∏—Ö –¥–æ—Ö–æ–¥—ã –Ω–µ –≤—ã—Å–æ–∫–∏ (—Ä–∞–∑ –æ–Ω–∏ –±–µ—Ä—É—Ç –∫—Ä–µ–¥–∏—Ç—ã), –Ω–æ –∏—Ö –∑–∞—Ä–∞–±–æ—Ç–æ–∫ —Å—Ç–∞–±–∏–ª–µ–Ω, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –º–æ–≥—É—Ç –∑–∞–∫—Ä—ã—Ç—å –∫—Ä–µ–¥–∏—Ç'
    '–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–æ–º–ø–∞–Ω–∏—é, —Ç–æ –≤ —Ü–µ–ª–æ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–µ (–±–µ–∑ —Ä–∞—Å–∫—Ä–∞—Å–∫–∏ –ø–æ —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π), –æ—Ç–∫–ª–∏–∫–Ω—É–≤—à–∏—Ö—Å—è 10-15% –≤–æ –≤—Å–µ—Ö –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö'

    '### –ù–∞ –∫–∞–∫–∏—Ö –¥–æ–ª–∂–Ω–æ—Å—Ç—è—Ö —Ä–∞–±–æ—Ç–∞—é—Ç –∫–ª–∏–µ–Ω—Ç—ã'
    value_counts = df['GEN_TITLE'].value_counts().reset_index()
    value_counts.columns = ['GEN_TITLE', 'count']

    # Sort the DataFrame by count in ascending order
    sorted_value_counts = value_counts.sort_values(by='count', ascending=True)

    # Create a histogram using Plotly Express
    fig = px.histogram(df, y='GEN_TITLE', color='CNT_TARGET',
                       category_orders={'GEN_TITLE': sorted_value_counts['GEN_TITLE'].tolist()})
    st.plotly_chart(fig, use_container_width=True)
    '–ù–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –≤—ã–≤–æ–¥, —á—Ç–æ —á–µ–º –Ω–∏–∂–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å, —Ç–µ–º –±–æ–ª—å—à–µ –ª—é–¥–∏ –±–µ—Ä—É—Ç –∫—Ä–µ–¥–∏—Ç—ã, —á—Ç–æ –ª–æ–≥–∏—á–Ω–æ, –æ—Ç –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –Ω–∞–ø—Ä—è–º—É—é –∑–∞–≤–∏—Å–∏—Ç –¥–æ—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –µ–≥–æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –∫—Ä–µ–¥–∏—Ç–∞'

    '### –ö–∞–∫ –¥–æ–ª–≥–æ –∫–ª–∏–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Ç–µ–∫—É—â–µ–º –º–µ—Å—Ç–µ'
    col1, col2 = st.columns(2)
    with col1:
        fig = px.scatter(df, x='WORK_TIME')
        st.plotly_chart(fig, use_container_width=True)
    with col2:
        value_counts = df['WORK_TIME'].value_counts().reset_index()
        value_counts.columns = ['WORK_TIME', 'count']

        # sorted_value_counts = value_counts.sort_values(by='count', ascending=True)

        fig = px.histogram(df, x='WORK_TIME', color='CNT_TARGET')
        st.plotly_chart(fig, use_container_width=True)
    '–í–∏–¥–∏–º –≤—ã–±—Ä–æ—Å—ã, –Ω–æ –Ω–µ–ª—å–∑—è –æ–¥–Ω–æ–∑–∞—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–∏ –ª—é–¥–∏ –Ω–µ –º–æ–≥—É—Ç —Ç–∞–∫ –¥–æ–ª–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Ç–µ–∫—É—â–µ–º –º–µ—Å—Ç–µ, –≤–ø–æ–ª–Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ, —á—Ç–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å—é –∂–∏–∑–Ω—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ'
    '–ó–∞–∫–æ–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ö–æ–¥ –Ω–∞ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–º –º–µ—Å—Ç–µ —Ä–∞–±–æ—Ç—ã, –µ—Å—Ç—å –¥–ª–∏–Ω–Ω—ã–π —Ö–≤–æ—Å—Ç —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ —Å—Ç–æ—Ä–æ–∂–∏–ª –Ω–∞ —Ä–∞–±–æ—á–µ–º –º–µ—Å—Ç–µ'
    '*–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç*: –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ª—é–¥–µ–π —Å—Ç–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –±–∞–Ω–∫–∞ –º–µ–Ω–µ–µ —á–µ–º —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü –ø–æ—Å–ª–µ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞'

    '### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–º–µ–π–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞ —Å—Ä–µ–¥–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤'

    fig = px.histogram(df, x='FAMILY_INCOME', color='CNT_TARGET',
                       category_orders={'FAMILY_INCOME': ['–¥–æ 5000 —Ä—É–±.', '–æ—Ç 5000 –¥–æ 10000 —Ä—É–±.',
                                                          '–æ—Ç 10000 –¥–æ 20000 —Ä—É–±.', '–æ—Ç 20000 –¥–æ 50000 —Ä—É–±.',
                                                          '—Å–≤—ã—à–µ 50000 —Ä—É–±.'
                                                          ]})

    grouped, sorted_value_counts = perc_of_target(df, 'FAMILY_INCOME', 'GEN_INDUSTRY')
    dict_edu = {'–¥–æ 5000 —Ä—É–±.': 0, '–æ—Ç 5000 –¥–æ 10000 —Ä—É–±.': 1,
                '–æ—Ç 10000 –¥–æ 20000 —Ä—É–±.': 2, '–æ—Ç 20000 –¥–æ 50000 —Ä—É–±.': 3,
                '—Å–≤—ã—à–µ 50000 —Ä—É–±.': 4}
    grouped['sort'] = grouped['FAMILY_INCOME'].map(dict_edu)
    grouped = grouped.sort_values(by='sort', ascending=True)

    fig.data[1].text = grouped['TARGET_SHARE']
    fig.update_traces(textposition='outside', textfont_size=14)

    st.plotly_chart(fig, use_container_width=True)

    '–ö—Ä–µ–¥–∏—Ç—ã –±–µ—Ä—É—Ç –ª—é–¥–∏ —Å –¥–æ—Ö–æ–¥–æ–º –æ–∫–æ–ª–æ 1 –ú–†–û–¢ –¥–æ 2 –ú–†–û–¢'
    '–≠—Ç–æ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ, –≤–µ–¥—å –ª—é–¥–∏ —Å —Ç–∞–∫–∏–º –¥–æ—Ö–æ–¥–æ–º –Ω–µ –º–æ–≥—É—Ç –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏–µ –ø–æ–∫—É–ø–∫–∏, –ø–æ—ç—Ç–æ–º—É –±–µ—Ä—É—Ç –∫—Ä–µ–¥–∏—Ç, –∞ –ø–æ—Å–∫–æ–ª—å–∫—É (—Å–º.–≤—ã—à–µ) –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –≥–æ—Å. —É—á—Ä–µ–∂–¥–µ–Ω–∏—è—Ö, —Ç–æ –æ–Ω–∏ —Å–ø–æ—Å–æ–±–Ω—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –∫—Ä–µ–¥–∏—Ç'
    '–õ—é–¥–∏ —Å —Å–µ–º–µ–π–Ω—ã–º –¥–æ—Ö–æ–¥–æ–º –Ω–∏–∂–µ –ú–†–û–¢ —Å –º–µ–Ω—å—à–µ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é —Å–º–æ–≥—É—Ç –≤—ã–ø–ª–∞—Ç–∏—Ç—å –∫—Ä–µ–¥–∏—Ç, –ø–æ—ç—Ç–æ–º—É –∏ –±–∞–Ω–∫ —Ä–µ–¥–∫–æ –≤—ã–¥–∞–µ—Ç –∏–º –∫—Ä–µ–¥–∏—Ç—ã'
    '–õ—é–¥—è–º —Å —Å–µ–º–µ–π–Ω—ã–º –¥–æ—Ö–æ–¥–æ–º –≤—ã—à–µ 50–∫ —Ä—É–±–ª–µ–π –∫—Ä–µ–¥–∏—Ç—ã —Ä–µ–¥–∫–æ –Ω—É–∂–Ω—ã, —á–∞—â–µ –≤—Å–µ–≥–æ –Ω–∞ —á—Ç–æ-—Ç–æ –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–µ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä), —Å—É–¥—è –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–µ –∫—Ä–µ–¥–∏—Ç–∞ (—Å–º. —Ç–∞–±–ª. –≤ –Ω–∞—á–∞–ª–µ) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç—ã'

    st.write('### –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤')
    col1, col2 = st.columns(2)
    with col1:
        '#### –û–±—â–µ–µ –∫–æ–ª-–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤'
        fig = px.histogram(df, x='CNT_LOANS', color='CNT_TARGET')
        st.plotly_chart(fig, use_container_width=True)
    with col2:
        '#### –ö–æ–ª-–≤–æ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤'
        fig = px.histogram(df, x='CLOSED_LOANS', color='CNT_TARGET')
        st.plotly_chart(fig, use_container_width=True)

    '–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ –∏–º–µ—é—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤ –ø—Ä–∏ —ç—Ç–æ–º —á–∞—â–µ –≤—Å–µ–≥–æ —É –Ω–∏—Ö –≤ –±–∞–Ω–∫–µ –≤—Å–µ–≥–æ 1 –∫—Ä–µ–¥–∏—Ç, –æ—Ç–∫–ª–∏–∫ –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏'

    f'–ö–æ–ª-–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –±–æ–ª–µ–µ 1 –Ω–µ–∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫—Ä–µ–¥–∏—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ: {df[(df.CNT_LOANS - df.CLOSED_LOANS) >= 2].shape[0]}'
    '–¢–∞–∫–æ–≤—ã—Ö –¥–æ–ª–∂–Ω–∏–∫–æ–≤ –æ–∫–æ–ª–æ 1-2% –æ—Ç –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤'


def target_corr(df):
    st.write('## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Å —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π')
    col1, col2, col3 = st.columns(3)
    with col1:
        st.write('#### –ú—É–∂—á–∏–Ω—ã')
        fig = px.pie(df[df.GENDER == '–ú—É–∂—á–∏–Ω–∞'], 'CNT_TARGET')
        st.plotly_chart(fig, use_container_width=True)
    with col2:
        st.write('#### –ñ–µ–Ω—â–∏–Ω—ã')
        fig = px.pie(df[df.GENDER == '–ñ–µ–Ω—â–∏–Ω–∞'], 'CNT_TARGET')
        st.plotly_chart(fig, use_container_width=True)
    with col3:
        st.write('#### –í—Å–µ–≥–æ')
        fig = px.pie(df, 'CNT_TARGET')
        st.plotly_chart(fig, use_container_width=True)

    '–í —Å—Ä–µ–¥–Ω–µ–º 13% –ª—é–¥–µ–π –æ—Ç–∫–ª–∏–∫–Ω—É–ª–æ—Å—å –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è'
    '–î–∞–Ω–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞'

    '### –ü—Ä–æ—Ü–µ–Ω—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å –æ—Ç–∫–ª–∏–∫–æ–º –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é'
    col1, col2 = st.columns(2)
    with col1:
        st.write('#### –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –Ω–∞ –ø–µ–Ω—Å–∏–∏')
        fig = px.histogram(df, 'status_pens', color='CNT_TARGET')

        grouped = df.groupby(['status_pens', 'CNT_TARGET']).count()['AGE'].reset_index()

        fig.data[1].text = [
            f"{grouped[(grouped.status_pens == '–Ω–µ –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä') & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.status_pens == '–Ω–µ –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä')]['AGE'].sum():0.2%}",
            f"{grouped[(grouped.status_pens == '–ø–µ–Ω—Å–∏–æ–Ω–µ—Ä') & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.status_pens == '–ø–µ–Ω—Å–∏–æ–Ω–µ—Ä')]['AGE'].sum():0.2%}",
        ]
        fig.update_traces(textposition='outside', textfont_size=14)
        st.plotly_chart(fig, use_container_width=True)
    with col2:
        st.write('#### –¢—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω–æ—Å—Ç—å')
        fig = px.histogram(df, 'status_work', color='CNT_TARGET')
        grouped = df.groupby(['status_work', 'CNT_TARGET']).count()['AGE'].reset_index()

        fig.data[1].text = [
            f"{grouped[(grouped.status_work == '—Ä–∞–±–æ—Ç–∞–µ—Ç') & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.status_work == '—Ä–∞–±–æ—Ç–∞–µ—Ç')]['AGE'].sum():0.2%}",
            f"{grouped[(grouped.status_work == '–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç') & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.status_work == '–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç')]['AGE'].sum():0.2%}",
        ]
        fig.update_traces(textposition='outside', textfont_size=14)
        st.plotly_chart(fig, use_container_width=True)

    f'–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ –Ω–∞ –ø–µ–Ω—Å–∏–∏ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä–æ–≤ –≤—Å–µ–≥–æ {df[(df.status_pens == "–ø–µ–Ω—Å–∏–æ–Ω–µ—Ä") & (df.status_work == "—Ä–∞–±–æ—Ç–∞–µ—Ç")].shape[0] / df[(df.status_pens == "–ø–µ–Ω—Å–∏–æ–Ω–µ—Ä")].shape[0]:0.1%}' \
    f' - –∏—Ö {df[(df.status_pens == "–ø–µ–Ω—Å–∏–æ–Ω–µ—Ä") & (df.status_work == "—Ä–∞–±–æ—Ç–∞–µ—Ç")].shape[0]} —á–µ–ª–æ–≤–µ–∫'

    '–ò—Ç–∞–∫, –ø–æ—á—Ç–∏ –≤—Å–µ –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä—ã –±–µ—Ä—É—â–∏–µ –∫—Ä–µ–¥–∏—Ç—ã - —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–µ–Ω—ã, —Ç–∞–∫ –∫–∞–∫ –∏–Ω–∞—á–µ –æ–Ω–∏ –Ω–µ —Å–º–æ–≥—É—Ç –≤—ã–ø–ª–∞—Ç–∏—Ç—å –∫—Ä–µ–¥–∏—Ç'

    col1, col2 = st.columns(2)
    with col1:
        st.write('#### –í–ª–∞–¥–µ–Ω–∏–µ –∫–≤–∞—Ä—Ç–∏—Ä–æ–π')
        fig = px.histogram(df, 'FL_PRESENCE_FL', color='CNT_TARGET')
        grouped = df.groupby(['FL_PRESENCE_FL', 'CNT_TARGET']).count()['AGE'].reset_index()

        fig.data[1].text = [
            f"{grouped[(grouped.FL_PRESENCE_FL == '–ï—Å—Ç—å') & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.FL_PRESENCE_FL == '–ï—Å—Ç—å')]['AGE'].sum():0.2%}",
            f"{grouped[(grouped.FL_PRESENCE_FL == '–ù–µ—Ç') & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.FL_PRESENCE_FL == '–ù–µ—Ç')]['AGE'].sum():0.2%}",
        ]
        fig.update_traces(textposition='outside', textfont_size=14)
        st.plotly_chart(fig, use_container_width=True)

    with col2:
        st.write('#### –í–ª–∞–¥–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º')
        fig = px.histogram(df, 'OWN_AUTO', color='CNT_TARGET')
        grouped = df.groupby(['OWN_AUTO', 'CNT_TARGET']).count()['AGE'].reset_index()

        fig.data[1].text = [
            f"{grouped[(grouped.OWN_AUTO == 0) & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.OWN_AUTO == 0)]['AGE'].sum():0.2%}",
            f"{grouped[(grouped.OWN_AUTO == 1) & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.OWN_AUTO == 1)]['AGE'].sum():0.2%}",
            f"{grouped[(grouped.OWN_AUTO == 2) & (grouped.CNT_TARGET == 1)]['AGE'].sum() / grouped[(grouped.OWN_AUTO == 2)]['AGE'].sum():0.2%}",
        ]
        fig.update_traces(textposition='outside', textfont_size=14)
        st.plotly_chart(fig, use_container_width=True)

    '–ö–≤–∞—Ä—Ç–∏—Ä–æ–π –≤–ª–∞–¥–µ–µ—Ç –ø–æ—á—Ç–∏ 50% –∫–ª–∏–µ–Ω—Ç–æ–≤, —Ç–∞–∫ —á—Ç–æ –∫—Ä–µ–¥–∏—Ç –æ–Ω–∏ –±–µ—Ä—É—Ç —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–∞ —Ç–µ—Ö–Ω–∏–∫—É/–º–µ–±–µ–ª—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –¥–ª—è –∫–≤–∞—Ä—Ç–∏—Ä—ã'
    '–ù–∞–ª–∏—á–∏–µ –º–∞—à–∏–Ω—ã –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Ç–∫–ª–∏–∫ –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é'
    '**–í—ã–≤–æ–¥:** –ù–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∏ –Ω–µ –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä—ã –∏ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–ª–∏–µ–Ω—Ç—ã, –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∏—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é –ø–æ –ø—Ä–∏–∑–Ω–∞–∫—É –Ω–∞–ª–∏—á–∏—è –∫–≤–∞—Ä—Ç–∏—Ä—ã –∏ –º–∞—à–∏–Ω—ã –Ω–µ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è'


def num_features(df):
    st.write('## –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤')

    corr = df.corr(numeric_only=True)

    # Use the built-in bool type instead of np.bool
    color_scale = px.colors.diverging.RdYlBu
    max_corr = max(corr.abs().max())
    fig = px.imshow(corr, text_auto=True, color_continuous_scale=color_scale, zmin=-max_corr, zmax=max_corr, )
    st.plotly_chart(fig, use_container_width=True)

    '–ë–æ–ª–µ–µ —Å–∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:'
    '* –°—Ä–æ–∫ –∫—Ä–µ–¥–∏—Ç–∞ –∏ —Å—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞\n'
    '* –°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞ –∏ –ø–µ—Ä–≤—ã–π –ø–ª–∞—Ç–µ–∂\n'
    '* –ö–æ–ª-–≤–æ –¥–µ—Ç–µ–π –∏ –∫–æ–ª-–≤–æ –∏–∂–¥–∏–≤–µ–Ω—Ü–µ–≤\n'
    '–í—Å–µ —ç—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–ø–æ–ª–Ω–µ –ª–æ–≥–∏—á–Ω—ã\n'
    '–ù–∞–±–ª—é–¥–∞–µ—Ç—Å—è –Ω–µ—Å–∏–ª—å–Ω–∞—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —Å–≤—è–∑—å –¥–æ—Ö–æ–¥–∞ –∏ —Å—É–º–º—ã –∫—Ä–µ–¥–∏—Ç–∞, —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ—á–µ–º—É –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –≤—Å–µ–≥–æ 0.3 (–∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —Å–≤—è–∑—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–≤—ã—à–µ)'
    '–¢–∞–∫–∂–µ –ª—é–±–æ–ø—ã—Ç–Ω—ã–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –≤–æ–∑—Ä–∞—Å—Ç –Ω–µ–º–Ω–æ–≥–æ –∞–Ω—Ç–∏–∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–∂–¥–∏–≤–µ–Ω—Ü–µ–≤, –∏ –Ω–µ–º–Ω–æ–≥–æ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–µ—Ç–µ–π, –∫–æ–≥–¥–∞ –∫–æ–ª-–≤–æ –¥–µ—Ç–µ–π –∏ –∏–∂–¥–∏–≤–µ–Ω—Ü–µ–≤ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—Ç (—Ö–æ—Ç—å –∏ –Ω–µ —Å–∏–ª—å–Ω–æ)'

    '*–¶–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç –Ω–∏ —Å –æ–¥–Ω–∏–º —á–∏—Å–ª–æ–≤—ã–º –ø—Ä–∏–∑–Ω–∞–∫–æ–º*'

    '### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–æ—Ö–æ–¥–∞ –∏ —Å—É–º–º—ã –∫—Ä–µ–¥–∏—Ç–∞'
    fig = px.scatter(df, x='PERSONAL_INCOME', y='CREDIT')
    st.plotly_chart(fig, use_container_width=True)

    '–í–∏–¥–∏–º, —á—Ç–æ –ª—é–¥–∏ —Å –±–æ–ª—å—à–∏–º (–æ—á–µ–Ω—å –¥–∞–∂–µ) –¥–æ—Ö–æ–¥–æ–º –±—Ä–∞–ª–∏ –∫—Ä–µ–¥–∏—Ç –Ω–∞ –Ω–µ–±–æ–ª—å—à–∏–µ —Å—É–º–º—ã (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–æ—Ö–æ–¥–∞), –∞ –ª—é–¥–∏ —Å–æ —Å—Ä–µ–¥–Ω–∏–º –¥–æ—Ö–æ–¥–æ–º –±—Ä–∞–ª–∏ –∫—Ä–µ–¥–∏—Ç—ã –Ω–∞ —Å—É–º–º—ã –æ—á–µ–Ω—å –±–ª–∏–∑–∫–∏–µ –∫ –∏—Ö –¥–æ—Ö–æ–¥—É, –æ—Ç—Å—é–¥–∞ –∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –Ω–µ –±–æ–ª—å—à–µ 0.3'
    '–í–≤–µ–¥—É *–Ω–æ–≤—É—é –º–µ—Ç—Ä–∏–∫—É* - –¥–æ–ª—è —Å—É–º–º—ã –∫—Ä–µ–¥–∏—Ç–∞ –≤ –¥–æ—Ö–æ–¥–µ –∫–ª–∏–µ–Ω—Ç–∞'

    '### –î–æ–ª—è —Å—É–º–º—ã –∫—Ä–µ–¥–∏—Ç–∞ –≤ –¥–æ—Ö–æ–¥–µ –∫–ª–∏–µ–Ω—Ç–∞ '
    df['SHARE_CREDIT_IN_INCOME'] = df.CREDIT / df.PERSONAL_INCOME
    fig = px.scatter(df, x='SHARE_CREDIT_IN_INCOME')
    st.plotly_chart(fig, use_container_width=True)

    fig = px.histogram(df, x='SHARE_CREDIT_IN_INCOME')
    fig.add_annotation(x=2, y=410,
                       text=f"–°—Ä–µ–¥–Ω–µ–µ = {df.SHARE_CREDIT_IN_INCOME.mean():0.1f}",
                       showarrow=False, )
    fig.add_annotation(x=2, y=390,
                       text=f"–ú–µ–¥–∏–∞–Ω–∞ = {df.SHARE_CREDIT_IN_INCOME.median():0.1f}",
                       showarrow=False, )
    fig.add_vline(x=df.SHARE_CREDIT_IN_INCOME.mean())
    st.plotly_chart(fig, use_container_width=True)

    '–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, —á—Ç–æ –∏ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –¥–æ–∫–∞–∑–∞—Ç—å: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∞—è –≥—Ä—É–ø–ø–∞ –ª—é–¥–µ–π –±–µ—Ä–µ—Ç –∫—Ä–µ–¥–∏—Ç –Ω–∞ —Å—É–º–º—É –≤ 2 –∏ –±–æ–ª–µ–µ —Ä–∞–∑ –ø—Ä–µ–≤—ã—à–∞—é—â—É—é –∏—Ö –¥–æ—Ö–æ–¥, –æ—Ç—Å—é–¥–∞ –∏ —Ç–∞–∫–∞—è –Ω–µ–≤—ã—Å–æ–∫–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è'
    '*–î–∞–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ –∏–º–µ–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å —Ç—è–∂–µ–ª—ã–º —Ö–≤–æ—Å—Ç–æ–º!*'

    '–¢–∞–∫–∂–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—É–º–º—ã –∫—Ä–µ–¥–∏—Ç–∞ –Ω–∞ 1 –≥–æ–¥'
    '–í–≤–µ–¥–µ–º –¥–ª—è —ç—Ç–æ–≥–æ –º–µ—Ç—Ä–∏–∫—É - —Å—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç –Ω–∞ 1 –º–µ—Å—è—Ü'

    '### –°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞ –Ω–∞ 1 –º–µ—Å—è—Ü'
    df['CREDIT_IN_YEAR'] = df.CREDIT / df.TERM
    fig = px.histogram(df, x='CREDIT_IN_YEAR')
    fig.add_annotation(x=4600, y=410,
                       text=f"–°—Ä–µ–¥–Ω–µ–µ = {df.CREDIT_IN_YEAR.mean():0.1f}",
                       showarrow=False, )
    fig.add_annotation(x=4600, y=380,
                       text=f"–ú–µ–¥–∏–∞–Ω–∞ = {df.CREDIT_IN_YEAR.median():0.1f}",
                       showarrow=False, )
    fig.add_vline(x=df.CREDIT_IN_YEAR.mean())
    st.plotly_chart(fig, use_container_width=True)

    '*–î–∞–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å —Ç—è–∂–µ–ª—ã–º —Ö–≤–æ—Å—Ç–æ–º!*'

    '–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –±—Ä–∞—Ç—å –∫—Ä–µ–¥–∏—Ç –Ω–∞ –±–æ–ª—å—à—É—é —Å—É–º–º—É –∏ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–π —Å—Ä–æ–∫ (–≤ –º–µ—Å—è—Ü–∞—Ö), –æ—Ç—Å—é–¥–∞ –∏ —Ç—è–∂–µ–ª—ã–π —Ö–≤–æ—Å—Ç –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏'


if __name__ == '__main__':
    st.title('EDA –ø—Ä–æ–µ–∫—Ç: –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–∞–Ω–∫–∞')
    '–°–æ–∑–¥–∞—Ç–µ–ª—å: –ù–∞–¥–µ–∂–¥–∞ –ì–µ—Ä–∞—Å—å–∫–∏–Ω–∞, –ú–û–í–°-2023'
    df = open_data()

    '**–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞:** –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–∞–Ω–∫–∞'

    '**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ:**'
    with st.expander("üëÅÔ∏è‚Äçüó®Ô∏è –ü—Ä–∏–∑–Ω–∞–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤"):
        """
        - AGE	‚Äî –≤–æ–∑—Ä–∞—Å—Ç –∫–ª–∏–µ–Ω—Ç–∞;
        - GENDER ‚Äî –ø–æ–ª –∫–ª–∏–µ–Ω—Ç–∞;
        - EDUCATION ‚Äî –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ;
        - MARITAL_STATUS ‚Äî —Å–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ;
        - CHILD_TOTAL	‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ—Ç–µ–π –∫–ª–∏–µ–Ω—Ç–∞;
        - DEPENDANTS ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∂–¥–∏–≤–µ–Ω—Ü–µ–≤ –∫–ª–∏–µ–Ω—Ç–∞;
        - status_work	‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç—ã;
        - status_pens	‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–µ–Ω—Å–∏–∏;
        - REG_ADDRESS_PROVINCE ‚Äî –æ–±–ª–∞—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞;
        - FACT_ADDRESS_PROVINCE ‚Äî –æ–±–ª–∞—Å—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞;
        - POSTAL_ADDRESS_PROVINCE ‚Äî –ø–æ—á—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å –æ–±–ª–∞—Å—Ç–∏;
        - FL_PRESENCE_FL ‚Äî –Ω–∞–ª–∏—á–∏–µ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã (1 ‚Äî –µ—Å—Ç—å, 0 ‚Äî –Ω–µ—Ç);
        - OWN_AUTO ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
        - GEN_INDUSTRY ‚Äî –æ—Ç—Ä–∞—Å–ª—å —Ä–∞–±–æ—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞;
        - GEN_TITLE ‚Äî –¥–æ–ª–∂–Ω–æ—Å—Ç—å;
        - JOB_DIR ‚Äî –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–∞–Ω–∏–∏;
        - WORK_TIME ‚Äî –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ç–µ–∫—É—â–µ–º –º–µ—Å—Ç–µ (–≤ –º–µ—Å—è—Ü–∞—Ö);
        - FAMILY_INCOME ‚Äî —Å–µ–º–µ–π–Ω—ã–π –¥–æ—Ö–æ–¥ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π);
        - PERSONAL_INCOME ‚Äî –ª–∏—á–Ω—ã–π –¥–æ—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ (–≤ —Ä—É–±–ª—è—Ö);
        - CREDIT ‚Äî —Å—É–º–º–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫—Ä–µ–¥–∏—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ (–≤ —Ä—É–±–ª—è—Ö);
        - TERM ‚Äî —Å—Ä–æ–∫ –∫—Ä–µ–¥–∏—Ç–∞;
        - FST_PAYMENT ‚Äî –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å (–≤ —Ä—É–±–ª—è—Ö);
        - CNT_LOANS - –∫–æ–ª-–≤–æ –≤–∑—è—Ç—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤;
        - LOANS_CLOSED - –∫–æ–ª-–≤–æ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤.
        
        """

    with st.expander("‚úÖ –¶–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è"):
        '''
        CNT_TARGET - –æ—Ç–∫–ª–∏–∫ –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é
        - 1 - –æ—Ç–∫–ª–∏–∫ –±—ã–ª
        - 0 - –æ—Ç–∫–ª–∏–∫–∞ –Ω–µ –±—ã–ª–æ
        '''
    '–ú–µ—Ç—Ä–∏–∫–∞ - –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å, –Ω–µ –∏–º–µ—é—â–∏–π –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –Ω–∞—Å—Ç–æ—è—â–µ–π –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–µ—Ç—Ä–∏–∫–µ'
    '–ü—Ä–æ—Ü–µ–Ω—Ç—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–∏–∫–Ω—É–≤—à–∏—Ö—Å—è –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ –≥—Ä—É–ø–ø—ã'
    '–ú–†–û–¢ - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–ø–ª–∞—Ç—ã —Ç—Ä—É–¥–∞'

    tab1, tab2, tab3 = st.tabs(
        ["–û–±—â–µ–µ –∏–Ω—Ñ–æ –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö", "–°–≤—è–∑—å —Å —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π", '–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤'])
    with tab1:
        client_info(df)
    with tab2:
        target_corr(df)
    with tab3:
        num_features(df)
